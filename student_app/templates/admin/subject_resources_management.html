{% extends 'base.html' %}
{% load static %}

{% block title %}{{ subject.name }} - Resources | Sikshya Kendra{% endblock %}

{% block extra_head %}
<link rel="stylesheet" href="{% static 'css/dashboard.css' %}">
{% endblock %}

{% block content %}
<div class="container-fluid py-4">
    <!-- Header -->
    <div class="row mb-4">
        <div class="col-12">
            <div class="d-flex justify-content-between align-items-center">
                <div>
                    <h1 class="fw-bold text-gradient mb-2">
                        <i class="fas fa-book me-2"></i>{{ subject.name }} - Resource Management
                    </h1>
                    <p class="text-muted mb-0">Manage all resources for {{ subject.name }} ({{ subject.faculty.name }} - {{ level_name }}).</p>
                </div>
                <div>
                    <a href="{% url 'admin_faculty_subjects' subject.faculty.slug subject.level %}" class="btn btn-outline-secondary me-2">
                        <i class="fas fa-arrow-left me-2"></i>Back to Subjects
                    </a>
                </div>
            </div>
        </div>
    </div>

    <!-- Add Resource Forms -->
    <div class="row mb-4">
        <div class="col-12">
            <div class="card">
                <div class="card-header">
                    <h5 class="mb-0">
                        <i class="fas fa-plus me-2"></i>Add New Resource
                    </h5>
                </div>
                <div class="card-body">
                    <ul class="nav nav-tabs" id="resourceTabs" role="tablist">
                        <li class="nav-item" role="presentation">
                            <button class="nav-link active" id="chapter-tab" data-bs-toggle="tab" data-bs-target="#chapter" type="button" role="tab">
                                <i class="fas fa-list me-2"></i>Chapter
                            </button>
                        </li>
                        <li class="nav-item" role="presentation">
                            <button class="nav-link" id="syllabus-tab" data-bs-toggle="tab" data-bs-target="#syllabus" type="button" role="tab">
                                <i class="fas fa-file-alt me-2"></i>Syllabus
                            </button>
                        </li>
                        <li class="nav-item" role="presentation">
                            <button class="nav-link" id="question-tab" data-bs-toggle="tab" data-bs-target="#question" type="button" role="tab">
                                <i class="fas fa-question-circle me-2"></i>Question Bank
                            </button>
                        </li>
                        <li class="nav-item" role="presentation">
                            <button class="nav-link" id="textbook-tab" data-bs-toggle="tab" data-bs-target="#textbook" type="button" role="tab">
                                <i class="fas fa-book-reader me-2"></i>Textbook
                            </button>
                        </li>
                        <li class="nav-item" role="presentation">
                            <button class="nav-link" id="practical-tab" data-bs-toggle="tab" data-bs-target="#practical" type="button" role="tab">
                                <i class="fas fa-flask me-2"></i>Practical
                            </button>
                        </li>
                        <li class="nav-item" role="presentation">
                            <button class="nav-link" id="viva-tab" data-bs-toggle="tab" data-bs-target="#viva" type="button" role="tab">
                                <i class="fas fa-microphone me-2"></i>Viva
                            </button>
                        </li>
                    </ul>
                    <div class="tab-content mt-3" id="resourceTabsContent">
                        <!-- Chapter Form -->
                        <div class="tab-pane fade show active" id="chapter" role="tabpanel">
                            <form method="post" enctype="multipart/form-data">
                                {% csrf_token %}
                                <input type="hidden" name="action" value="add_resource">
                                <input type="hidden" name="resource_type" value="chapter">
                                <div class="row g-3">
                                    <div class="col-md-6">
                                        <label for="chapterTitle" class="form-label">Chapter Title *</label>
                                        <input type="text" class="form-control" id="chapterTitle" name="title" required>
                                    </div>
                                    <div class="col-md-3">
                                        <label for="chapterNumber" class="form-label">Chapter Number *</label>
                                        <input type="number" class="form-control" id="chapterNumber" name="chapter_number" required min="1">
                                    </div>
                                    <div class="col-md-3">
                                        <label for="chapterFile" class="form-label">File *</label>
                                        <input type="file" class="form-control" id="chapterFile" name="file" accept=".pdf,.doc,.docx,.txt,.ppt,.pptx" required>
                                    </div>
                                    <div class="col-12">
                                        <label for="chapterDescription" class="form-label">Description</label>
                                        <textarea class="form-control" id="chapterDescription" name="description" rows="3"></textarea>
                                    </div>
                                    <div class="col-12">
                                        <button type="submit" class="btn btn-primary">
                                            <i class="fas fa-plus me-2"></i>Add Chapter
                                        </button>
                                    </div>
                                </div>
                            </form>
                        </div>

                        <!-- Syllabus Form -->
                        <div class="tab-pane fade" id="syllabus" role="tabpanel">
                            <form method="post" enctype="multipart/form-data">
                                {% csrf_token %}
                                <input type="hidden" name="action" value="add_resource">
                                <input type="hidden" name="resource_type" value="syllabus">
                                <div class="row g-3">
                                    <div class="col-md-6">
                                        <label for="syllabusTitle" class="form-label">Syllabus Title *</label>
                                        <input type="text" class="form-control" id="syllabusTitle" name="title" required>
                                    </div>
                                    <div class="col-md-6">
                                        <label for="syllabusFile" class="form-label">File *</label>
                                        <input type="file" class="form-control" id="syllabusFile" name="file" accept=".pdf,.doc,.docx,.txt" required>
                                    </div>
                                    <div class="col-12">
                                        <label for="syllabusDescription" class="form-label">Content/Description</label>
                                        <textarea class="form-control" id="syllabusDescription" name="description" rows="3"></textarea>
                                    </div>
                                    <div class="col-12">
                                        <button type="submit" class="btn btn-primary">
                                            <i class="fas fa-plus me-2"></i>Add Syllabus
                                        </button>
                                    </div>
                                </div>
                            </form>
                        </div>


                        <!-- Question Bank Form -->
                        <div class="tab-pane fade" id="question" role="tabpanel">
                            <form method="post" enctype="multipart/form-data">
                                {% csrf_token %}
                                <input type="hidden" name="action" value="add_resource">
                                <input type="hidden" name="resource_type" value="question">
                                <div class="row g-3">
                                    <div class="col-md-6">
                                        <label for="questionTitle" class="form-label">Question Bank Title *</label>
                                        <input type="text" class="form-control" id="questionTitle" name="title" required>
                                    </div>
                                    <div class="col-md-6">
                                        <label for="questionFile" class="form-label">File *</label>
                                        <input type="file" class="form-control" id="questionFile" name="file" accept=".pdf,.doc,.docx,.txt" required>
                                    </div>
                                    <div class="col-12">
                                        <label for="questionDescription" class="form-label">Description</label>
                                        <textarea class="form-control" id="questionDescription" name="description" rows="3"></textarea>
                                    </div>
                                    <div class="col-12">
                                        <button type="submit" class="btn btn-primary">
                                            <i class="fas fa-plus me-2"></i>Add Question Bank
                                        </button>
                                    </div>
                                </div>
                            </form>
                        </div>

                        <!-- Textbook Form -->
                        <div class="tab-pane fade" id="textbook" role="tabpanel">
                            <form method="post" enctype="multipart/form-data">
                                {% csrf_token %}
                                <input type="hidden" name="action" value="add_resource">
                                <input type="hidden" name="resource_type" value="textbook">
                                <div class="row g-3">
                                    <div class="col-md-4">
                                        <label for="textbookTitle" class="form-label">Textbook Title *</label>
                                        <input type="text" class="form-control" id="textbookTitle" name="title" required>
                                    </div>
                                    <div class="col-md-4">
                                        <label for="textbookAuthor" class="form-label">Author</label>
                                        <input type="text" class="form-control" id="textbookAuthor" name="author">
                                    </div>
                                    <div class="col-md-4">
                                        <label for="textbookFile" class="form-label">File *</label>
                                        <input type="file" class="form-control" id="textbookFile" name="file" accept=".pdf,.doc,.docx,.txt,.epub,.mobi" required>
                                    </div>
                                    <div class="col-md-6">
                                        <label for="textbookPublisher" class="form-label">Publisher</label>
                                        <input type="text" class="form-control" id="textbookPublisher" name="publisher">
                                    </div>
                                    <div class="col-md-6">
                                        <label for="textbookIsbn" class="form-label">ISBN</label>
                                        <input type="text" class="form-control" id="textbookIsbn" name="isbn">
                                    </div>
                                    <div class="col-12">
                                        <label for="textbookDescription" class="form-label">Description</label>
                                        <textarea class="form-control" id="textbookDescription" name="description" rows="3"></textarea>
                                    </div>
                                    <div class="col-12">
                                        <button type="submit" class="btn btn-primary">
                                            <i class="fas fa-plus me-2"></i>Add Textbook
                                        </button>
                                    </div>
                                </div>
                            </form>
                        </div>

                        <!-- Practical Form -->
                        <div class="tab-pane fade" id="practical" role="tabpanel">
                            <form method="post" enctype="multipart/form-data">
                                {% csrf_token %}
                                <input type="hidden" name="action" value="add_resource">
                                <input type="hidden" name="resource_type" value="practical">
                                <div class="row g-3">
                                    <div class="col-md-6">
                                        <label for="practicalTitle" class="form-label">Practical Title *</label>
                                        <input type="text" class="form-control" id="practicalTitle" name="title" required>
                                    </div>
                                    <div class="col-md-6">
                                        <label for="practicalFile" class="form-label">File</label>
                                        <input type="file" class="form-control" id="practicalFile" name="file" accept=".pdf,.doc,.docx,.txt,.zip,.rar">
                                    </div>
                                    <div class="col-12">
                                        <label for="practicalObjective" class="form-label">Objective *</label>
                                        <textarea class="form-control" id="practicalObjective" name="objective" rows="2" required></textarea>
                                    </div>
                                    <div class="col-12">
                                        <label for="practicalMaterials" class="form-label">Materials Required</label>
                                        <textarea class="form-control" id="practicalMaterials" name="materials_required" rows="2"></textarea>
                                    </div>
                                    <div class="col-12">
                                        <label for="practicalProcedure" class="form-label">Procedure *</label>
                                        <textarea class="form-control" id="practicalProcedure" name="procedure" rows="3" required></textarea>
                                    </div>
                                    <div class="col-12">
                                        <label for="practicalResult" class="form-label">Expected Result</label>
                                        <textarea class="form-control" id="practicalResult" name="expected_result" rows="2"></textarea>
                                    </div>
                                    <div class="col-12">
                                        <button type="submit" class="btn btn-primary">
                                            <i class="fas fa-plus me-2"></i>Add Practical
                                        </button>
                                    </div>
                                </div>
                            </form>
                        </div>

                        <!-- Viva Form -->
                        <div class="tab-pane fade" id="viva" role="tabpanel">
                            <form method="post" enctype="multipart/form-data">
                                {% csrf_token %}
                                <input type="hidden" name="action" value="add_resource">
                                <input type="hidden" name="resource_type" value="viva">
                                <div class="row g-3">
                                    <div class="col-md-6">
                                        <label for="vivaTitle" class="form-label">Viva Title *</label>
                                        <input type="text" class="form-control" id="vivaTitle" name="title" required>
                                    </div>
                                    <div class="col-md-6">
                                        <label for="vivaDifficulty" class="form-label">Difficulty Level</label>
                                        <select class="form-select" id="vivaDifficulty" name="difficulty_level">
                                            <option value="easy">Easy</option>
                                            <option value="medium" selected>Medium</option>
                                            <option value="hard">Hard</option>
                                        </select>
                                    </div>
                                    <div class="col-12">
                                        <label for="vivaQuestion" class="form-label">Question *</label>
                                        <textarea class="form-control" id="vivaQuestion" name="question" rows="3" required></textarea>
                                    </div>
                                    <div class="col-12">
                                        <label for="vivaAnswer" class="form-label">Answer *</label>
                                        <textarea class="form-control" id="vivaAnswer" name="answer" rows="3" required></textarea>
                                    </div>
                                    <div class="col-12">
                                        <label for="vivaDescription" class="form-label">Description</label>
                                        <textarea class="form-control" id="vivaDescription" name="description" rows="2"></textarea>
                                    </div>
                                    <div class="col-12">
                                        <button type="submit" class="btn btn-primary">
                                            <i class="fas fa-plus me-2"></i>Add Viva
                                        </button>
                                    </div>
                                </div>
                            </form>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Resources Display -->
    <div class="row g-4">
        <!-- Chapters -->
        <div class="col-12">
            <div class="card">
                <div class="card-header">
                    <h5 class="mb-0">
                        <i class="fas fa-list me-2"></i>Chapters ({{ chapters.count }})
                    </h5>
                </div>
                <div class="card-body">
                    {% if chapters %}
                        <div class="table-responsive">
                            <table class="table table-hover">
                                <thead>
                                    <tr>
                                        <th>Chapter #</th>
                                        <th>Title</th>
                                        <th>Description</th>
                                        <th>File</th>
                                        <th>Status</th>
                                        <th>Actions</th>
                                    </tr>
                                </thead>
                                <tbody>
                                    {% for chapter in chapters %}
                                    <tr>
                                        <td>{{ chapter.chapter_number }}</td>
                                        <td>{{ chapter.title }}</td>
                                        <td>{{ chapter.description|truncatechars:50 }}</td>
                                        <td>
                                            {% if chapter.file %}
                                                <a href="{{ chapter.file.url }}" target="_blank" class="btn btn-sm btn-outline-primary">
                                                    <i class="fas fa-download me-1"></i>Download
                                                </a>
                                            {% else %}
                                                <span class="text-muted">No file</span>
                                            {% endif %}
                                        </td>
                                        <td>
                                            <span class="badge bg-{% if chapter.status == 'approved' %}success{% elif chapter.status == 'pending' %}warning{% else %}danger{% endif %}">
                                                {{ chapter.status|title }}
                                            </span>
                                        </td>
                                        <td>
                                            <form method="post" class="d-inline" onsubmit="return confirm('Are you sure you want to delete this chapter?')">
                                                {% csrf_token %}
                                                <input type="hidden" name="action" value="delete_resource">
                                                <input type="hidden" name="resource_type" value="chapter">
                                                <input type="hidden" name="resource_id" value="{{ chapter.id }}">
                                                <button type="submit" class="btn btn-sm btn-outline-danger">
                                                    <i class="fas fa-trash"></i>
                                                </button>
                                            </form>
                                        </td>
                                    </tr>
                                    {% endfor %}
                                </tbody>
                            </table>
                        </div>
                    {% else %}
                        <div class="text-center py-4">
                            <i class="fas fa-list fa-3x text-muted mb-3"></i>
                            <h6 class="text-muted">No chapters found</h6>
                            <p class="text-muted">Add chapters using the form above.</p>
                        </div>
                    {% endif %}
                </div>
            </div>
        </div>

        <!-- Syllabus -->
        <div class="col-12">
            <div class="card">
                <div class="card-header">
                    <h5 class="mb-0">
                        <i class="fas fa-file-alt me-2"></i>Syllabus ({{ syllabi.count }})
                    </h5>
                </div>
                <div class="card-body">
                    {% if syllabi %}
                        <div class="table-responsive">
                            <table class="table table-hover">
                                <thead>
                                    <tr>
                                        <th>Title</th>
                                        <th>Content</th>
                                        <th>File</th>
                                        <th>Status</th>
                                        <th>Actions</th>
                                    </tr>
                                </thead>
                                <tbody>
                                    {% for syllabus in syllabi %}
                                    <tr>
                                        <td>{{ syllabus.title }}</td>
                                        <td>{{ syllabus.content|truncatechars:50 }}</td>
                                        <td>
                                            {% if syllabus.file %}
                                                <a href="{{ syllabus.file.url }}" target="_blank" class="btn btn-sm btn-outline-primary">
                                                    <i class="fas fa-download me-1"></i>Download
                                                </a>
                                            {% else %}
                                                <span class="text-muted">No file</span>
                                            {% endif %}
                                        </td>
                                        <td>
                                            <span class="badge bg-{% if syllabus.status == 'approved' %}success{% elif syllabus.status == 'pending' %}warning{% else %}danger{% endif %}">
                                                {{ syllabus.status|title }}
                                            </span>
                                        </td>
                                        <td>
                                            <form method="post" class="d-inline" onsubmit="return confirm('Are you sure you want to delete this syllabus?')">
                                                {% csrf_token %}
                                                <input type="hidden" name="action" value="delete_resource">
                                                <input type="hidden" name="resource_type" value="syllabus">
                                                <input type="hidden" name="resource_id" value="{{ syllabus.id }}">
                                                <button type="submit" class="btn btn-sm btn-outline-danger">
                                                    <i class="fas fa-trash"></i>
                                                </button>
                                            </form>
                                        </td>
                                    </tr>
                                    {% endfor %}
                                </tbody>
                            </table>
                        </div>
                    {% else %}
                        <div class="text-center py-4">
                            <i class="fas fa-file-alt fa-3x text-muted mb-3"></i>
                            <h6 class="text-muted">No syllabus found</h6>
                            <p class="text-muted">Add syllabus using the form above.</p>
                        </div>
                    {% endif %}
                </div>
            </div>
        </div>


        <!-- Question Banks -->
        <div class="col-12">
            <div class="card">
                <div class="card-header">
                    <h5 class="mb-0">
                        <i class="fas fa-question-circle me-2"></i>Question Banks ({{ questions.count }})
                    </h5>
                </div>
                <div class="card-body">
                    {% if questions %}
                        <div class="table-responsive">
                            <table class="table table-hover">
                                <thead>
                                    <tr>
                                        <th>Title</th>
                                        <th>Description</th>
                                        <th>File</th>
                                        <th>Status</th>
                                        <th>Actions</th>
                                    </tr>
                                </thead>
                                <tbody>
                                    {% for question in questions %}
                                    <tr>
                                        <td>{{ question.title }}</td>
                                        <td>{{ question.description|truncatechars:50 }}</td>
                                        <td>
                                            {% if question.file %}
                                                <a href="{{ question.file.url }}" target="_blank" class="btn btn-sm btn-outline-primary">
                                                    <i class="fas fa-download me-1"></i>Download
                                                </a>
                                            {% else %}
                                                <span class="text-muted">No file</span>
                                            {% endif %}
                                        </td>
                                        <td>
                                            <span class="badge bg-{% if question.status == 'approved' %}success{% elif question.status == 'pending' %}warning{% else %}danger{% endif %}">
                                                {{ question.status|title }}
                                            </span>
                                        </td>
                                        <td>
                                            <form method="post" class="d-inline" onsubmit="return confirm('Are you sure you want to delete this question bank?')">
                                                {% csrf_token %}
                                                <input type="hidden" name="action" value="delete_resource">
                                                <input type="hidden" name="resource_type" value="question">
                                                <input type="hidden" name="resource_id" value="{{ question.id }}">
                                                <button type="submit" class="btn btn-sm btn-outline-danger">
                                                    <i class="fas fa-trash"></i>
                                                </button>
                                            </form>
                                        </td>
                                    </tr>
                                    {% endfor %}
                                </tbody>
                            </table>
                        </div>
                    {% else %}
                        <div class="text-center py-4">
                            <i class="fas fa-question-circle fa-3x text-muted mb-3"></i>
                            <h6 class="text-muted">No question banks found</h6>
                            <p class="text-muted">Add question banks using the form above.</p>
                        </div>
                    {% endif %}
                </div>
            </div>
        </div>

        <!-- Textbooks -->
        <div class="col-12">
            <div class="card">
                <div class="card-header">
                    <h5 class="mb-0">
                        <i class="fas fa-book-reader me-2"></i>Textbooks ({{ textbooks.count }})
                    </h5>
                </div>
                <div class="card-body">
                    {% if textbooks %}
                        <div class="table-responsive">
                            <table class="table table-hover">
                                <thead>
                                    <tr>
                                        <th>Title</th>
                                        <th>Author</th>
                                        <th>Publisher</th>
                                        <th>File</th>
                                        <th>Status</th>
                                        <th>Actions</th>
                                    </tr>
                                </thead>
                                <tbody>
                                    {% for textbook in textbooks %}
                                    <tr>
                                        <td>{{ textbook.title }}</td>
                                        <td>{{ textbook.author|default:"N/A" }}</td>
                                        <td>{{ textbook.publisher|default:"N/A" }}</td>
                                        <td>
                                            {% if textbook.file %}
                                                <a href="{{ textbook.file.url }}" target="_blank" class="btn btn-sm btn-outline-primary">
                                                    <i class="fas fa-download me-1"></i>Download
                                                </a>
                                            {% else %}
                                                <span class="text-muted">No file</span>
                                            {% endif %}
                                        </td>
                                        <td>
                                            <span class="badge bg-{% if textbook.status == 'approved' %}success{% elif textbook.status == 'pending' %}warning{% else %}danger{% endif %}">
                                                {{ textbook.status|title }}
                                            </span>
                                        </td>
                                        <td>
                                            <form method="post" class="d-inline" onsubmit="return confirm('Are you sure you want to delete this textbook?')">
                                                {% csrf_token %}
                                                <input type="hidden" name="action" value="delete_resource">
                                                <input type="hidden" name="resource_type" value="textbook">
                                                <input type="hidden" name="resource_id" value="{{ textbook.id }}">
                                                <button type="submit" class="btn btn-sm btn-outline-danger">
                                                    <i class="fas fa-trash"></i>
                                                </button>
                                            </form>
                                        </td>
                                    </tr>
                                    {% endfor %}
                                </tbody>
                            </table>
                        </div>
                    {% else %}
                        <div class="text-center py-4">
                            <i class="fas fa-book-reader fa-3x text-muted mb-3"></i>
                            <h6 class="text-muted">No textbooks found</h6>
                            <p class="text-muted">Add textbooks using the form above.</p>
                        </div>
                    {% endif %}
                </div>
            </div>
        </div>

        <!-- Practicals -->
        <div class="col-12">
            <div class="card">
                <div class="card-header">
                    <h5 class="mb-0">
                        <i class="fas fa-flask me-2"></i>Practicals ({{ practicals.count }})
                    </h5>
                </div>
                <div class="card-body">
                    {% if practicals %}
                        <div class="table-responsive">
                            <table class="table table-hover">
                                <thead>
                                    <tr>
                                        <th>Title</th>
                                        <th>Objective</th>
                                        <th>Difficulty</th>
                                        <th>File</th>
                                        <th>Status</th>
                                        <th>Actions</th>
                                    </tr>
                                </thead>
                                <tbody>
                                    {% for practical in practicals %}
                                    <tr>
                                        <td>{{ practical.title }}</td>
                                        <td>{{ practical.objective|truncatechars:50 }}</td>
                                        <td>
                                            <span class="badge bg-{% if practical.difficulty_level == 'easy' %}success{% elif practical.difficulty_level == 'medium' %}warning{% else %}danger{% endif %}">
                                                {{ practical.difficulty_level|title }}
                                            </span>
                                        </td>
                                        <td>
                                            {% if practical.file %}
                                                <a href="{{ practical.file.url }}" target="_blank" class="btn btn-sm btn-outline-primary">
                                                    <i class="fas fa-download me-1"></i>Download
                                                </a>
                                            {% else %}
                                                <span class="text-muted">No file</span>
                                            {% endif %}
                                        </td>
                                        <td>
                                            <span class="badge bg-{% if practical.status == 'approved' %}success{% elif practical.status == 'pending' %}warning{% else %}danger{% endif %}">
                                                {{ practical.status|title }}
                                            </span>
                                        </td>
                                        <td>
                                            <form method="post" class="d-inline" onsubmit="return confirm('Are you sure you want to delete this practical?')">
                                                {% csrf_token %}
                                                <input type="hidden" name="action" value="delete_resource">
                                                <input type="hidden" name="resource_type" value="practical">
                                                <input type="hidden" name="resource_id" value="{{ practical.id }}">
                                                <button type="submit" class="btn btn-sm btn-outline-danger">
                                                    <i class="fas fa-trash"></i>
                                                </button>
                                            </form>
                                        </td>
                                    </tr>
                                    {% endfor %}
                                </tbody>
                            </table>
                        </div>
                    {% else %}
                        <div class="text-center py-4">
                            <i class="fas fa-flask fa-3x text-muted mb-3"></i>
                            <h6 class="text-muted">No practicals found</h6>
                            <p class="text-muted">Add practicals using the form above.</p>
                        </div>
                    {% endif %}
                </div>
            </div>
        </div>

        <!-- Vivas -->
        <div class="col-12">
            <div class="card">
                <div class="card-header">
                    <h5 class="mb-0">
                        <i class="fas fa-microphone me-2"></i>Vivas ({{ vivas.count }})
                    </h5>
                </div>
                <div class="card-body">
                    {% if vivas %}
                        <div class="table-responsive">
                            <table class="table table-hover">
                                <thead>
                                    <tr>
                                        <th>Title</th>
                                        <th>Question</th>
                                        <th>Difficulty</th>
                                        <th>Status</th>
                                        <th>Actions</th>
                                    </tr>
                                </thead>
                                <tbody>
                                    {% for viva in vivas %}
                                    <tr>
                                        <td>{{ viva.title }}</td>
                                        <td>{{ viva.question|truncatechars:50 }}</td>
                                        <td>
                                            <span class="badge bg-{% if viva.difficulty_level == 'easy' %}success{% elif viva.difficulty_level == 'medium' %}warning{% else %}danger{% endif %}">
                                                {{ viva.difficulty_level|title }}
                                            </span>
                                        </td>
                                        <td>
                                            <span class="badge bg-{% if viva.status == 'approved' %}success{% elif viva.status == 'pending' %}warning{% else %}danger{% endif %}">
                                                {{ viva.status|title }}
                                            </span>
                                        </td>
                                        <td>
                                            <form method="post" class="d-inline" onsubmit="return confirm('Are you sure you want to delete this viva?')">
                                                {% csrf_token %}
                                                <input type="hidden" name="action" value="delete_resource">
                                                <input type="hidden" name="resource_type" value="viva">
                                                <input type="hidden" name="resource_id" value="{{ viva.id }}">
                                                <button type="submit" class="btn btn-sm btn-outline-danger">
                                                    <i class="fas fa-trash"></i>
                                                </button>
                                            </form>
                                        </td>
                                    </tr>
                                    {% endfor %}
                                </tbody>
                            </table>
                        </div>
                    {% else %}
                        <div class="text-center py-4">
                            <i class="fas fa-microphone fa-3x text-muted mb-3"></i>
                            <h6 class="text-muted">No vivas found</h6>
                            <p class="text-muted">Add vivas using the form above.</p>
                        </div>
                    {% endif %}
                </div>
            </div>
        </div>
    </div>
</div>

<style>
.text-gradient {
    background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
    -webkit-background-clip: text;
    -webkit-text-fill-color: transparent;
    background-clip: text;
}

.nav-tabs .nav-link {
    border: 1px solid #e2e8f0;
    border-bottom: none;
    border-radius: 8px 8px 0 0;
    margin-right: 0.25rem;
}

.nav-tabs .nav-link.active {
    background-color: #667eea;
    color: white;
    border-color: #667eea;
}

.nav-tabs .nav-link:hover {
    border-color: #667eea;
    color: #667eea;
}

.tab-content {
    border: 1px solid #e2e8f0;
    border-top: none;
    border-radius: 0 0 8px 8px;
    padding: 1.5rem;
    background: white;
}
</style>
{% endblock %}
